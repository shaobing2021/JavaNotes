[实例](https://www.runoob.com/docker/docker-install-nginx.html)

## Nginx

```cmd
#搜索
root@luozheng:/home# docker search nginx
#安装
root@luozheng:/home# docker pull nginx
#查看
root@luozheng:/home# docker images
#运行--name起别名  3344外部地址，80容器内部端口，端口暴露
root@luozheng:/home# docker run -d --name nginx1 -p 3344:80 nginx
docker run -d -p 3344:80 --name nginx3 -v /etc/nginx:/root/luozheng/nginx nginx
docker run -d -p 4455:80 --name nginx11 -v /root/luozheng/nginx:/etc/nginx nginx
docker run -d -p 3377:80 --name nginx6 -v /etc/nginx:/root/luozheng/nginx nginx
docker run -d -p 3388:80 --name nginx7 -v /etc/nginx:/root/luozheng/nginx nginx
9731d63ee585b7c92d921c44b9c7a9de8f62241c31c2e5d586ae2b539ea2e7e7
root@luozheng:/home# docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
9731d63ee585        nginx               "/docker-entrypoint.…"   6 seconds ago       Up 5 seconds        0.0.0.0:3344->80/tcp   nginx1
#测试部署成功
root@luozheng:/home# curl localhost:3344
#telnet 服务器地址确保能联通 
telnet 124.70.77.210 3344
#测试访问服务器
http://124.70.77.210:3344/
#进入nginx
root@luozheng:/home# docker exec -it nginx1 /bin/bash
#查看nginx目录
root@9731d63ee585:/# whereis nginx
nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx
#修改配置信息
root@9731d63ee585:/# cd /etc/nginx
#nginx进行修改配置
root@9731d63ee585:/etc/nginx# ls
conf.d	fastcgi_params	koi-utf  koi-win  mime.types  modules  nginx.conf  scgi_params	uwsgi_params  win-utf
```

## tomcat

```cmd
#下载即删除
docker run -it --rm tomcat:9.0

#下载tomcat
root@luozheng:/home# docker pull tomcat:9.0
#启动tomcat容器
root@luozheng:/home# docker run -d -p 3355:8080 --name tomcat3 tomcat
#查看运行的容器
root@luozheng:/home# docker ps 
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
5d01cfa86aa3        tomcat              "catalina.sh run"        About an hour ago   Up About an hour    0.0.0.0:3355->8080/tcp   tomcat1
9731d63ee585        nginx               "/docker-entrypoint.…"   2 hours ago         Up 2 hours          0.0.0.0:3344->80/tcp     nginx1
1e80bc59a485        centos              "/bin/bash"              3 hours ago         Up 3 hours                                   nervous_swanson
#访问发现没有问题，只是404
http://124.70.77.210:3355/

#进入tomcat容器
root@luozheng:/home# docker exec -it tomcat3 /bin/bash
#进入webapps发现空的
root@5d01cfa86aa3:/usr/local/tomcat# cd webapps
root@5d01cfa86aa3:/usr/local/tomcat/webapps# ls
#将东西部署到该处
root@5d01cfa86aa3:/usr/local/tomcat# cp -r  webapps.dist/* webapps
#再访问即可，如果不成功可以稍等一下，进入页面看下文件有没有，或者restart一下
http://124.70.77.210:3366/docs/config/
curl localhost:3366
```

## elsticSearch

```cmd
docker pull elasticsearch:7.8.0
#es暴露端口很多，占用内存
@es数据一般需要放置到安全目录！挂载
#--net somenetwork ? 网络配置
docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e
#es会占用1.2个g的内存所有通过javaopts设置一下
root@luozheng:/home# docker run -d --name elasticsearch1 -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" -e ES_JAVA_OPTS="-Xms64m -Xmx128m" elasticsearch:7.8.0
Unable to find image 'elasticsearch:7.8.1' locally
#查看到容器内存占用情况
docker stats 容器ID
```

## mysql

```cmd
docker pull mysql:5.7.11
虽然安装成功但是启动有问题
#官方示例
$ docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag
#
$ docker run --name mysql3 -e MYSQL_ROOT_PASSWORD=root -d mysql:5.7.11
#注意修改密码
#-d 后台运行 ， -p  端口映射  -v 卷挂载   -e 环境配置密码 --name  容器名字
root@luozheng:/home# docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root --name mysql1 mysql:5.7.11
docker run -d -p 3310:3306 -e MYSQL_ROOT_PASSWORD=root --name mysql4 mysql:5.7.11
700643fcb3cd93ce4a1ef1e1e8734092ccff3958efab3d16e2182cde2dbc2620
docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root --name mysql5 mysql:5.7.7
#容器删除挂载的数据不会丢失
```

## portainer

```

#8088为访问端口，9000为应用使用端口
docker run -d -p 8088:9000 \
--restart=always \
-v /var/run/docker.sock:/var/run/docker.sock \
--name prtainer-test \
docker.io/portainer/portainer
```

## zookeeper

```cmd
docker pull zookeeper:3.4.12
docker run -d --name zookeeper -p 2181:2181 -v /root/zookeeper/data:/data   zookeeper:3.4.12
curl localhost:2181
```



## commit镜像

```cmd
docker commit -m="提交的信息" -a="作者" 容器ID  目标镜像：{Tag}
#启动一个tomcat，然后do something ，提交
root@luozheng:/home# docker commit -a="luozheng" -m="add webapps" a71ddadbff5d mytomcat
sha256:b95d3fe4c20a3b405ae18019e24ac9aa63f473896b6f1029080f2a4cdb47cb1b
root@luozheng:/home# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED              SIZE
```

## 注意点

* 下载时可能报/linux/v8这种错误，下载对应具有Linux/v8的即可

* ```
  #解决can not allocate memory
  #查看内存使用情况
  free -m
  top 查看进程信息
  按f进入编辑页面，下移动到MEM点击Enter
  之后按上方向案件将MEM提到最上面。点击s设置排序。之后按q或Esc退出。则排序更改
  再次查看top 可以查看使用内存最大的进程进行结束
  kill -9 PID 杀死该进程
  ```

  
## MQ应用场景

### 用户注册

> 发送注册邮件和注册短信，传统做法：1.串行  2.并行

* 串行方式：注册信息写入数据库后，发送注册短信，再发送邮件，等以上任务全部完成后才返回给客户端。但是这种做法让客户端没有必要等待的东西

* 并行方式:注册写入数据库后，发送邮件的同时，发送短信，等三个任务全部完成后，返回给客户端，并行方式提高处理时间
* 消息队列：写入数据库后，将发送邮件、短信等业务逻辑交给消息队列（此处时间消耗很少）

## 应用解耦

> 双11，用户下单后，订单系统通知库存系统，传统做法是订单系统调用库存系统的接口

* 订单系统：用户下单后，订单系统完成持久化处理，将消息写入消息队列，返回用户订单下单成功
* 库存系统：订阅下单消息，获取下单消息，进行库操作，库存系统出现故障，消息队列也能保障消息可靠性，不会导致消息丢失

### 流量削峰

> 秒杀流量过大，应用挂掉，应用前端加入消息队列

* 用户发送请求，服务端收到之后，首先写入消息队列，加入消息队列长度超过最大值，则直接抛弃用户请求或跳转到错误页面
* 秒杀业务根据消息队列请求消息，做后续处理

